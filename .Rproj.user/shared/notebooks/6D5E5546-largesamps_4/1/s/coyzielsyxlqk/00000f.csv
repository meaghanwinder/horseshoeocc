"0","library(tidyverse)"
"0",""
"0","logit <- function(p){"
"0","  log(p/(1 - p))"
"0","}"
"0",""
"0","invlogit <- function(x){"
"0","  exp(x)/(1 + exp(x))"
"0","}"
"0",""
"0","set.seed(4)"
"0",""
"0","nsite <- 1000"
"0","nsamp <- 10"
"0",""
"0","det.prob <- 0.9"
"0",""
"0","beta0 <- 1 #### change value of intercept based on fitted model "
"0",""
"0","# 3 true covariates"
"0","beta3 <- c(2, -2, 2) "
"0","x3 <- rnorm(nsite*length(beta3), 0, 1) %>% "
"0","  matrix(nrow = nsite, ncol = length(beta3)) %>% "
"0","  scale()"
"0",""
"0","colnames(x3) <- paste0(""x"", 1:length(beta3))"
"0",""
"0","occ.prob3 <- invlogit(beta0 + x3 %*% beta3)"
"0",""
"0","z3 <- rbinom(nsite, 1, occ.prob3)"
"0",""
"0","df3 <- data.frame(site = 1:nsite, "
"0","                  nsamp = nsamp, "
"0","                  x3, "
"0","                  occ.prob3 = occ.prob3,"
"0","                  z3)"
"0",""
"0","y <- rep(NA, nsite)"
"0",""
"0","for(i in 1:nrow(df3)){"
"0","  y[i] <- rbinom(1, nsamp, det.prob * z3[i])"
"0","}"
"0",""
"0","df3 <- cbind(df3, "
"0","             det = y)"
"0",""
"0","sim_data3 <- list(df = df3[, c(""site"", ""nsamp"", paste0(""x"", 1:3), ""det"")],"
"0","                  z = z3, "
"0","                  x = x3,"
"0","                  det.prob = det.prob, "
"0","                  beta0 = beta0, "
"0","                  beta = beta3)"
"0",""
"0",""
"0",""
"0",""
"0","# 3 true covariates and 22 zero"
"0","beta25 <- c(beta3, rep(0, 22))"
"0","x22 <- rnorm(nsite*22, 0, 1) %>% "
"0","  matrix(nrow = nsite, ncol = 22) %>% "
"0","  scale()"
"0","x25 <- cbind(x3, x22)"
"0",""
"0","colnames(x25) <- paste0(""x"", 1:length(beta25))"
"0",""
"0","occ.prob25 <- invlogit(beta0 + x25 %*% beta25)"
"0",""
"0","z25 <- rbinom(nsite, 1, occ.prob25)"
"0",""
"0","df25 <- data.frame(site = 1:nsite, "
"0","                   nsamp = nsamp, "
"0","                   x25, "
"0","                   occ.prob25 = occ.prob25,"
"0","                   z25)"
"0",""
"0","y <- rep(NA, nsite)"
"0",""
"0","for(i in 1:nrow(df25)){"
"0","  y[i] <- rbinom(1, nsamp, det.prob * z25[i])"
"0","}"
"0",""
"0","df25 <- cbind(df25, "
"0","              det = y)"
"0",""
"0","sim_data25 <- list(df = df25[, c(""site"", ""nsamp"", paste0(""x"", 1:25), ""det"")],"
"0","                   z = z25, "
"0","                   x = x25,"
"0","                   det.prob = det.prob, "
"0","                   beta0 = beta0, "
"0","                   beta = beta3)"
"0",""
"0",""
"0",""
"0",""
"0","# 3 true covariates and 97 zero"
"0","beta100 <- c(beta3, rep(0, 97))"
"0","x75 <- rnorm(nsite*75, 0, 1) %>% "
"0","  matrix(nrow = nsite, ncol = 75) %>% "
"0","  scale()"
"0","x100 <- cbind(x25, x75)"
"0",""
"0","colnames(x100) <- paste0(""x"", 1:length(beta100))"
"0",""
"0","occ.prob100 <- invlogit(beta0 + x100 %*% beta100)"
"0",""
"0","z100 <- rbinom(nsite, 1, occ.prob100)"
"0",""
"0","df100 <- data.frame(site = 1:nsite, "
"0","                    nsamp = nsamp, "
"0","                    x100, "
"0","                    occ.prob100 = occ.prob100,"
"0","                    z100)"
"0",""
"0","y <- rep(NA, nsite)"
"0",""
"0","for(i in 1:nrow(df100)){"
"0","  y[i] <- rbinom(1, 10, det.prob * z100[i])"
"0","}"
"0",""
"0","df100 <- cbind(df100, "
"0","               det = y)"
"0",""
"0","sim_data100 <- list(df = df100[, c(""site"", ""nsamp"", paste0(""x"", 1:100), ""det"")],"
"0","                    z = z100, "
"0","                    x = x100,"
"0","                    det.prob = det.prob, "
"0","                    beta0 = beta0, "
"0","                    beta = beta3)"
